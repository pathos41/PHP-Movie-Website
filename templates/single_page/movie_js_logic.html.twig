<script type="text/javascript">
  $("#search-btn").on("click", function(){
    var searchItem = $("#search-box").val();
    // Get the search result
    $(document).ready(() => {
      url = `/movie/search/search/${searchItem}`;
      $(location).attr("href", url);
    });
  });

  $("#comment_submit").on("click", function(){
    var m_id = $(this).data("id");
    var content = $("#comment_input").val();
    // Post the comment to database through Ajax
    $.post(
      "/movie/comment/submit", 
      {
        "mid": m_id,
        "content": content
      }
    );

    $(document).ready(() => {
      url = `/movie/movie/get/${m_id}`;
      $(location).attr("href", url);
    });
  });
  //     (data) => {
  //       if(data.code == 200){
  //         $("#result-info").html(
  //           '<div class="alert alert-success" role="alert">\n' + 
  //             data.message +
  //           '</div>'
  //         );

  //         $("#all-comments").prepend(
  //           `<div class="row my-4">
  //             <div class="col-1">
  //               <i class="fas fa-user fa-2x"></i>
  //             </div>
  //             <div class="col-11 text-justify">
  //               <h5>Name</h5>
  //               <small>
  //                 ${content}
  //               </small>
  //             </div>
  //           </div>`
  //         );
  //       }else{
  //         $("#result-info").html(
  //           '<div class="alert alert-warning" role="alert">\n' + 
  //             data.message +
  //           '</div>'
  //         );
  //       }
  //     },
  //     "json"
  //   );
  // });

  $(".fa-user").on("click", function(){
    $(document).ready(() => {
      url = `/movie/login/process`;
      $(location).attr("href", url);
    });
  });

  $(".fa-sign-out-alt").on("click", function(){
    $(document).ready(() => {
      url = `/movie/login/logout`;
      $(location).attr("href", url);
    });
  }); 

  $(".rating").on("click",function(){
    var m_id = $(this).data("id");
    var score = $(this).data("score");
    $.post(
      "/movie/rate/score", 
      {
        "m_id": m_id,
        "score": score
      },
      () => {
        console.log(m_id, score);
      }
    );

    $(document).ready(() => {
      url = `/movie/movie/get/${m_id}`;
      $(location).attr("href", url);
    });
  });

  $(".rating1").hover(
    function(){
      $(".rating1").removeClass("far").addClass("fas");
    },
    function(){
      $(".rating1").removeClass("fas").addClass("far");
    }
  );

  $(".rating2").hover(
    function(){
      $(".rating1").removeClass("far").addClass("fas");
      $(".rating2").removeClass("far").addClass("fas");
    },
    function(){
      $(".rating1").removeClass("fas").addClass("far");
      $(".rating2").removeClass("fas").addClass("far");
    }
  );

  $(".rating3").hover(
    function(){
      $(".rating1").removeClass("far").addClass("fas");
      $(".rating2").removeClass("far").addClass("fas");
      $(".rating3").removeClass("far").addClass("fas");
    },
    function(){
      $(".rating1").removeClass("fas").addClass("far");
      $(".rating2").removeClass("fas").addClass("far");
      $(".rating3").removeClass("fas").addClass("far");
    }
  );

  $(".rating4").hover(
    function(){
      $(".rating1").removeClass("far").addClass("fas");
      $(".rating2").removeClass("far").addClass("fas");
      $(".rating3").removeClass("far").addClass("fas");
      $(".rating4").removeClass("far").addClass("fas");
    },
    function(){
      $(".rating1").removeClass("fas").addClass("far");
      $(".rating2").removeClass("fas").addClass("far");
      $(".rating3").removeClass("fas").addClass("far");
      $(".rating4").removeClass("fas").addClass("far");
    }
  );

  $(".rating5").hover(
    function(){
      $(".rating1").removeClass("far").addClass("fas");
      $(".rating2").removeClass("far").addClass("fas");
      $(".rating3").removeClass("far").addClass("fas");
      $(".rating4").removeClass("far").addClass("fas");
      $(".rating5").removeClass("far").addClass("fas");
    },
    function(){
      $(".rating1").removeClass("fas").addClass("far");
      $(".rating2").removeClass("fas").addClass("far");
      $(".rating3").removeClass("fas").addClass("far");
      $(".rating4").removeClass("fas").addClass("far");
      $(".rating5").removeClass("fas").addClass("far");
    }
  );
</script>